import { c as createAstro, a as createComponent, r as renderComponent, g as renderTemplate, h as defineScriptVars, e as renderScript, b as addAttribute, m as maybeRenderHead } from '../../chunks/astro/server_C9kPMc8v.mjs';
import 'kleur/colors';
import { s as supabase } from '../../chunks/supabaseClient_u_L1k4gK.mjs';
import { S as SITE } from '../../chunks/config_CCYON4iF.mjs';
import { I as IconMoon, a as IconSunHigh } from '../../chunks/IconSunHigh_CcvG3wmw.mjs';
import { $ as $$Layout } from '../../chunks/Layout_BKgePYbS.mjs';
/* empty css                                    */
export { renderers } from '../../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(raw || cooked.slice()) }));
var _a;
const $$Astro = createAstro("https://astro-paper.pages.dev/");
const prerender = false;
const $$Index = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$Index;
  const id = Astro2.url.searchParams.get("id");
  const isEditing = !!id;
  let existingArticle = {
    id: null,
    title: "",
    description: "",
    body: "# Sample Article\n\nThis is **sample content** for the article editor.\n\n## Features\n\n- Markdown support\n- Live preview\n- Rich text editing\n\n```javascript\nconsole.log('Code highlighting works!');\n```",
    author: SITE.author,
    featured: false,
    tags: []
  };
  let existingArticleError = null;
  if (isEditing) {
    const { data, error } = await supabase.from("blogs").select("*").eq("id", id).single();
    existingArticle = data;
    existingArticleError = error;
  }
  const defaultBody = `# Your Article Title

Start writing your article here...
`;
  return renderTemplate`${renderComponent($$result, "Layout", $$Layout, { "title": isEditing ? "Edit Article" : "Create New Article", "data-astro-cid-e4ag3yyx": true }, { "default": async ($$result2) => renderTemplate(_a || (_a = __template([" ", '<div class="flex max-h-screen min-h-screen flex-col overflow-hidden bg-background text-foreground" data-astro-cid-e4ag3yyx> <!-- Header --> <header class="border-b bg-background shadow-sm" data-astro-cid-e4ag3yyx> <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8" data-astro-cid-e4ag3yyx> <div class="flex items-center justify-between py-6" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <h1 class="text-3xl font-bold text-foreground" data-astro-cid-e4ag3yyx> ', ' </h1> <p class="mt-1 text-foreground/80" data-astro-cid-e4ag3yyx> ', ' </p> </div> <div class="flex space-x-12" data-astro-cid-e4ag3yyx> ', ' <div class="flex space-x-3" data-astro-cid-e4ag3yyx> <a href="/admin" class="rounded-lg bg-accent px-4 py-2 font-medium text-foreground transition-colors duration-200 hover:bg-accent/80" data-astro-cid-e4ag3yyx>\nCancel\n</a> </div> </div> </div> </div> </header> ', ' <div class="mx-auto w-full max-w-7xl flex-grow overflow-auto px-4 py-8 sm:px-6 lg:px-8" data-astro-cid-e4ag3yyx> <form id="articleForm" class="space-y-6"', "", ' data-astro-cid-e4ag3yyx> <!-- Article Metadata --> <div class="rounded-lg bg-muted p-6 shadow" data-astro-cid-e4ag3yyx> <h2 class="mb-4 text-lg font-semibold text-foreground" data-astro-cid-e4ag3yyx>\nArticle Details\n</h2> <div class="grid grid-cols-1 gap-6 md:grid-cols-2" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <label for="title" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nTitle *\n</label> <input type="text" id="title" name="title"', ' required class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Enter article title..." data-astro-cid-e4ag3yyx> </div> <div data-astro-cid-e4ag3yyx> <label for="author" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nAuthor *\n</label> <input type="text" id="author" name="author"', ' required class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Author name..." data-astro-cid-e4ag3yyx> </div> </div> <div class="mt-4" data-astro-cid-e4ag3yyx> <label for="description" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nDescription *\n</label> <textarea id="description" name="description" required rows="3" class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Brief description of the article..." data-astro-cid-e4ag3yyx>', '</textarea> </div> <div class="mt-4" data-astro-cid-e4ag3yyx> <label for="tags" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nTags\n</label> <input type="text" id="tags" name="tags"', ' class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Enter tags separated by commas (e.g., javascript, astro, tutorial)" data-astro-cid-e4ag3yyx> </div> <div class="mt-8 grid grid-cols-1 gap-6 border-t border-border pt-8 md:grid-cols-2" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <label for="ogImage" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nOG Image URL\n</label> <input type="url" id="ogImage" name="ogImage" value="" class="w-full rounded-lg border border-border px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500" placeholder="https://example.com/image.jpg" data-astro-cid-e4ag3yyx> <p class="mt-1 text-xs text-gray-500" data-astro-cid-e4ag3yyx>\nImage URL for social media sharing (recommended:\n                                1200x630px)\n</p> </div> <div data-astro-cid-e4ag3yyx> <label for="canonicalURL" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nCanonical URL\n</label> <input type="url" id="canonicalURL" name="canonicalURL" value="" class="w-full rounded-lg border border-border px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500" placeholder="https://example.com/original-article" data-astro-cid-e4ag3yyx> <p class="mt-1 text-xs text-gray-500" data-astro-cid-e4ag3yyx>\nOriginal URL if this article was published\n                                elsewhere first\n</p> </div> </div> </div> <!-- Article Content Editor --> <div class="rounded-lg border border-border bg-muted shadow" data-astro-cid-e4ag3yyx> <div class="border-b border-border px-6 py-4" data-astro-cid-e4ag3yyx> <div class="flex items-center justify-between" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <h2 class="text-lg font-semibold text-foreground" data-astro-cid-e4ag3yyx>\nArticle Content\n</h2> <p class="mt-1 text-sm text-foreground/80" data-astro-cid-e4ag3yyx>\nWrite your article using Markdown\n</p> </div> <div class="flex space-x-2" data-astro-cid-e4ag3yyx> <button type="button" id="editTab" class="rounded-lg bg-accent px-4 py-2 text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nEdit\n</button> <button type="button" id="previewTab" class="rounded-lg bg-background px-4 py-2 text-sm font-medium text-foreground hover:bg-muted" data-astro-cid-e4ag3yyx>\nPreview\n</button> </div> </div> </div> <div class="p-6" data-astro-cid-e4ag3yyx> <!-- Markdown Editor --> <div id="editor-container" data-astro-cid-e4ag3yyx> <textarea id="markdown-editor" class="h-96 w-full resize-none rounded-lg border border-border bg-background/80 p-4 font-mono text-sm text-foreground focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Start writing your article in Markdown..." data-astro-cid-e4ag3yyx>', '</textarea> </div> <!-- Preview Container --> <div id="preview-container" class="hidden" data-astro-cid-e4ag3yyx> <div id="markdown-preview" class="prose h-96 max-w-none overflow-y-auto rounded-lg border border-border bg-slate-50 p-4 text-gray-900" data-astro-cid-e4ag3yyx></div> </div> </div> </div> <!-- Action Buttons --> <div class="flex items-center justify-between rounded-lg bg-muted p-6 shadow" data-astro-cid-e4ag3yyx> <div class="flex items-center space-x-4" data-astro-cid-e4ag3yyx> <label class="flex items-center" data-astro-cid-e4ag3yyx> <input type="checkbox" id="featuredArticle" name="featuredArticle" class="rounded border-border text-accent focus:ring-accent"', ' data-astro-cid-e4ag3yyx> <span class="ml-2 text-sm text-foreground" data-astro-cid-e4ag3yyx>Feature this article?</span> </label> </div> <div class="flex space-x-3" data-astro-cid-e4ag3yyx> <button type="button" onclick="saveDraft()" class="rounded-lg border border-border bg-background px-6 py-3 font-medium text-foreground transition-colors duration-200 hover:bg-muted" data-astro-cid-e4ag3yyx>\nSave as Draft\n</button> <button type="submit" class="rounded-lg bg-accent px-6 py-3 font-medium text-foreground transition-colors duration-200 hover:bg-accent/80" data-astro-cid-e4ag3yyx> ', " </button> </div> </div> </form> </div> </div>  ", " ", ' <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">  <script>(function(){', '\n        // Make data available globally\n        window.articleData = {\n            content: articleContent,\n            isEditing: isEditing,\n        };\n    })();<\/script> <script>\n        // Configure marked for syntax highlighting\n        if (typeof marked !== "undefined" && typeof hljs !== "undefined") {\n            marked.setOptions({\n                highlight: function (code, lang) {\n                    if (lang && hljs.getLanguage(lang)) {\n                        try {\n                            return hljs.highlight(code, { language: lang })\n                                .value;\n                        } catch (err) {\n                            return err.message;\n                        }\n                    }\n                    return hljs.highlightAuto(code).value;\n                },\n                breaks: true,\n                gfm: true,\n            });\n        }\n\n        // Tab switching functionality\n        function initializeTabs() {\n            const editTab = document.getElementById("editTab");\n            const previewTab = document.getElementById("previewTab");\n            const editorContainer = document.getElementById("editor-container");\n            const previewContainer =\n                document.getElementById("preview-container");\n            const markdownEditor = document.getElementById("markdown-editor");\n            const markdownPreview = document.getElementById("markdown-preview");\n\n            function showEdit() {\n                editTab.className =\n                    "rounded-lg bg-accent px-4 py-2 text-sm font-medium text-foreground";\n                previewTab.className =\n                    "rounded-lg bg-background px-4 py-2 text-sm font-medium text-foreground border border-border hover:bg-accent/80";\n                editorContainer.classList.remove("hidden");\n                previewContainer.classList.add("hidden");\n            }\n\n            function showPreview() {\n                editTab.className =\n                    "rounded-lg bg-background px-4 py-2 text-sm font-medium text-foreground hover:bg-accent/80";\n                previewTab.className =\n                    "rounded-lg bg-accent px-4 py-2 text-sm font-medium text-white";\n                editorContainer.classList.add("hidden");\n                previewContainer.classList.remove("hidden");\n\n                // Update preview content\n                if (typeof marked !== "undefined") {\n                    const markdownContent = markdownEditor.value;\n                    markdownPreview.innerHTML = marked.parse(markdownContent);\n                } else {\n                    markdownPreview.innerHTML =\n                        \'<p class="text-red-600">Markdown parser not loaded. Please refresh the page.</p>\';\n                }\n            }\n\n            editTab.addEventListener("click", showEdit);\n            previewTab.addEventListener("click", showPreview);\n\n            // Initialize with edit tab active\n            showEdit();\n        }\n\n        // Make saveDraft available globally\n        window.saveDraft = saveDraft;\n\n        // Form submission handler\n        async function handleFormSubmission(draft = false) {\n            const form = document.getElementById("articleForm");\n            if (!form) return;\n\n            const isEditing = form.dataset.isEditing === "true";\n            const id = form.dataset.id;\n\n            const formData = new FormData(form);\n            const markdownEditor = document.getElementById("markdown-editor");\n\n            // Convert FormData to a plain object\n            const formObject = {};\n            for (const [key, value] of formData.entries()) {\n                formObject[key] = value;\n            }\n\n            // Add markdown content\n            if (markdownEditor) {\n                formObject.body = markdownEditor.value;\n            }\n\n            // Add draft status\n            formObject.draft = draft;\n\n            if (isEditing && id) {\n                formObject.id = parseInt(id);\n            }\n\n            try {\n                const response = await fetch("/api/create-blog", {\n                    method: isEditing ? "PUT" : "POST",\n                    headers: {\n                        "Content-Type": "application/json",\n                    },\n                    body: JSON.stringify(formObject),\n                });\n\n                const { data, error } = await response.json();\n\n                if (error) {\n                    alert("Failed to save article. Please try again.");\n                    return;\n                } else {\n                    window.location.href = `/admin/manage-article?id=${data[0].id}`;\n                }\n\n                alert(\n                    window.articleData.isEditing\n                        ? "Article updated!"\n                        : "Article created!"\n                );\n            } catch (err) {\n                console.error("Network error:", err); //eslint-disable-line no-console\n                alert("Failed to save article. Please try again.");\n            }\n        }\n\n        function saveDraft() {\n            handleFormSubmission(true); // Draft submission\n        }\n\n        // Set up form submission handler\n        function setupFormSubmission() {\n            const form = document.getElementById("articleForm");\n            if (form) {\n                form.addEventListener("submit", function (e) {\n                    e.preventDefault();\n                    handleFormSubmission(false); // Call submission only on form submit\n                });\n            }\n        }\n\n        // Keyboard shortcuts\n        function setupKeyboardShortcuts() {\n            const markdownEditor = document.getElementById("markdown-editor");\n            if (markdownEditor) {\n                markdownEditor.addEventListener("keydown", function (e) {\n                    // Ctrl/Cmd + S to save draft\n                    if ((e.ctrlKey || e.metaKey) && e.key === "s") {\n                        e.preventDefault();\n                        saveDraft();\n                    }\n\n                    // Tab key handling for indentation\n                    if (e.key === "Tab") {\n                        e.preventDefault();\n                        const start = this.selectionStart;\n                        const end = this.selectionEnd;\n\n                        // Insert 2 spaces for tab\n                        this.value =\n                            this.value.substring(0, start) +\n                            "  " +\n                            this.value.substring(end);\n                        this.selectionStart = this.selectionEnd = start + 2;\n                    }\n                });\n            }\n        }\n\n        // Initialize everything when DOM is ready\n        function initialize() {\n            try {\n                initializeTabs();\n                setupFormSubmission();\n                setupKeyboardShortcuts();\n            } catch (error) {\n                console.error("Error initializing article editor:", error); //eslint-disable-line no-console\n            }\n        }\n\n        // Initialize when everything is loaded\n        if (document.readyState === "loading") {\n            document.addEventListener("DOMContentLoaded", initialize);\n        } else {\n            initialize();\n        }\n    <\/script>  '], [" ", '<div class="flex max-h-screen min-h-screen flex-col overflow-hidden bg-background text-foreground" data-astro-cid-e4ag3yyx> <!-- Header --> <header class="border-b bg-background shadow-sm" data-astro-cid-e4ag3yyx> <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8" data-astro-cid-e4ag3yyx> <div class="flex items-center justify-between py-6" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <h1 class="text-3xl font-bold text-foreground" data-astro-cid-e4ag3yyx> ', ' </h1> <p class="mt-1 text-foreground/80" data-astro-cid-e4ag3yyx> ', ' </p> </div> <div class="flex space-x-12" data-astro-cid-e4ag3yyx> ', ' <div class="flex space-x-3" data-astro-cid-e4ag3yyx> <a href="/admin" class="rounded-lg bg-accent px-4 py-2 font-medium text-foreground transition-colors duration-200 hover:bg-accent/80" data-astro-cid-e4ag3yyx>\nCancel\n</a> </div> </div> </div> </div> </header> ', ' <div class="mx-auto w-full max-w-7xl flex-grow overflow-auto px-4 py-8 sm:px-6 lg:px-8" data-astro-cid-e4ag3yyx> <form id="articleForm" class="space-y-6"', "", ' data-astro-cid-e4ag3yyx> <!-- Article Metadata --> <div class="rounded-lg bg-muted p-6 shadow" data-astro-cid-e4ag3yyx> <h2 class="mb-4 text-lg font-semibold text-foreground" data-astro-cid-e4ag3yyx>\nArticle Details\n</h2> <div class="grid grid-cols-1 gap-6 md:grid-cols-2" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <label for="title" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nTitle *\n</label> <input type="text" id="title" name="title"', ' required class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Enter article title..." data-astro-cid-e4ag3yyx> </div> <div data-astro-cid-e4ag3yyx> <label for="author" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nAuthor *\n</label> <input type="text" id="author" name="author"', ' required class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Author name..." data-astro-cid-e4ag3yyx> </div> </div> <div class="mt-4" data-astro-cid-e4ag3yyx> <label for="description" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nDescription *\n</label> <textarea id="description" name="description" required rows="3" class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Brief description of the article..." data-astro-cid-e4ag3yyx>', '</textarea> </div> <div class="mt-4" data-astro-cid-e4ag3yyx> <label for="tags" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nTags\n</label> <input type="text" id="tags" name="tags"', ' class="w-full rounded-lg border border-border px-3 py-2 focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Enter tags separated by commas (e.g., javascript, astro, tutorial)" data-astro-cid-e4ag3yyx> </div> <div class="mt-8 grid grid-cols-1 gap-6 border-t border-border pt-8 md:grid-cols-2" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <label for="ogImage" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nOG Image URL\n</label> <input type="url" id="ogImage" name="ogImage" value="" class="w-full rounded-lg border border-border px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500" placeholder="https://example.com/image.jpg" data-astro-cid-e4ag3yyx> <p class="mt-1 text-xs text-gray-500" data-astro-cid-e4ag3yyx>\nImage URL for social media sharing (recommended:\n                                1200x630px)\n</p> </div> <div data-astro-cid-e4ag3yyx> <label for="canonicalURL" class="mb-2 block text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nCanonical URL\n</label> <input type="url" id="canonicalURL" name="canonicalURL" value="" class="w-full rounded-lg border border-border px-3 py-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500" placeholder="https://example.com/original-article" data-astro-cid-e4ag3yyx> <p class="mt-1 text-xs text-gray-500" data-astro-cid-e4ag3yyx>\nOriginal URL if this article was published\n                                elsewhere first\n</p> </div> </div> </div> <!-- Article Content Editor --> <div class="rounded-lg border border-border bg-muted shadow" data-astro-cid-e4ag3yyx> <div class="border-b border-border px-6 py-4" data-astro-cid-e4ag3yyx> <div class="flex items-center justify-between" data-astro-cid-e4ag3yyx> <div data-astro-cid-e4ag3yyx> <h2 class="text-lg font-semibold text-foreground" data-astro-cid-e4ag3yyx>\nArticle Content\n</h2> <p class="mt-1 text-sm text-foreground/80" data-astro-cid-e4ag3yyx>\nWrite your article using Markdown\n</p> </div> <div class="flex space-x-2" data-astro-cid-e4ag3yyx> <button type="button" id="editTab" class="rounded-lg bg-accent px-4 py-2 text-sm font-medium text-foreground" data-astro-cid-e4ag3yyx>\nEdit\n</button> <button type="button" id="previewTab" class="rounded-lg bg-background px-4 py-2 text-sm font-medium text-foreground hover:bg-muted" data-astro-cid-e4ag3yyx>\nPreview\n</button> </div> </div> </div> <div class="p-6" data-astro-cid-e4ag3yyx> <!-- Markdown Editor --> <div id="editor-container" data-astro-cid-e4ag3yyx> <textarea id="markdown-editor" class="h-96 w-full resize-none rounded-lg border border-border bg-background/80 p-4 font-mono text-sm text-foreground focus:border-accent focus:ring-2 focus:ring-accent" placeholder="Start writing your article in Markdown..." data-astro-cid-e4ag3yyx>', '</textarea> </div> <!-- Preview Container --> <div id="preview-container" class="hidden" data-astro-cid-e4ag3yyx> <div id="markdown-preview" class="prose h-96 max-w-none overflow-y-auto rounded-lg border border-border bg-slate-50 p-4 text-gray-900" data-astro-cid-e4ag3yyx></div> </div> </div> </div> <!-- Action Buttons --> <div class="flex items-center justify-between rounded-lg bg-muted p-6 shadow" data-astro-cid-e4ag3yyx> <div class="flex items-center space-x-4" data-astro-cid-e4ag3yyx> <label class="flex items-center" data-astro-cid-e4ag3yyx> <input type="checkbox" id="featuredArticle" name="featuredArticle" class="rounded border-border text-accent focus:ring-accent"', ' data-astro-cid-e4ag3yyx> <span class="ml-2 text-sm text-foreground" data-astro-cid-e4ag3yyx>Feature this article?</span> </label> </div> <div class="flex space-x-3" data-astro-cid-e4ag3yyx> <button type="button" onclick="saveDraft()" class="rounded-lg border border-border bg-background px-6 py-3 font-medium text-foreground transition-colors duration-200 hover:bg-muted" data-astro-cid-e4ag3yyx>\nSave as Draft\n</button> <button type="submit" class="rounded-lg bg-accent px-6 py-3 font-medium text-foreground transition-colors duration-200 hover:bg-accent/80" data-astro-cid-e4ag3yyx> ', " </button> </div> </div> </form> </div> </div>  ", " ", ' <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">  <script>(function(){', '\n        // Make data available globally\n        window.articleData = {\n            content: articleContent,\n            isEditing: isEditing,\n        };\n    })();<\/script> <script>\n        // Configure marked for syntax highlighting\n        if (typeof marked !== "undefined" && typeof hljs !== "undefined") {\n            marked.setOptions({\n                highlight: function (code, lang) {\n                    if (lang && hljs.getLanguage(lang)) {\n                        try {\n                            return hljs.highlight(code, { language: lang })\n                                .value;\n                        } catch (err) {\n                            return err.message;\n                        }\n                    }\n                    return hljs.highlightAuto(code).value;\n                },\n                breaks: true,\n                gfm: true,\n            });\n        }\n\n        // Tab switching functionality\n        function initializeTabs() {\n            const editTab = document.getElementById("editTab");\n            const previewTab = document.getElementById("previewTab");\n            const editorContainer = document.getElementById("editor-container");\n            const previewContainer =\n                document.getElementById("preview-container");\n            const markdownEditor = document.getElementById("markdown-editor");\n            const markdownPreview = document.getElementById("markdown-preview");\n\n            function showEdit() {\n                editTab.className =\n                    "rounded-lg bg-accent px-4 py-2 text-sm font-medium text-foreground";\n                previewTab.className =\n                    "rounded-lg bg-background px-4 py-2 text-sm font-medium text-foreground border border-border hover:bg-accent/80";\n                editorContainer.classList.remove("hidden");\n                previewContainer.classList.add("hidden");\n            }\n\n            function showPreview() {\n                editTab.className =\n                    "rounded-lg bg-background px-4 py-2 text-sm font-medium text-foreground hover:bg-accent/80";\n                previewTab.className =\n                    "rounded-lg bg-accent px-4 py-2 text-sm font-medium text-white";\n                editorContainer.classList.add("hidden");\n                previewContainer.classList.remove("hidden");\n\n                // Update preview content\n                if (typeof marked !== "undefined") {\n                    const markdownContent = markdownEditor.value;\n                    markdownPreview.innerHTML = marked.parse(markdownContent);\n                } else {\n                    markdownPreview.innerHTML =\n                        \'<p class="text-red-600">Markdown parser not loaded. Please refresh the page.</p>\';\n                }\n            }\n\n            editTab.addEventListener("click", showEdit);\n            previewTab.addEventListener("click", showPreview);\n\n            // Initialize with edit tab active\n            showEdit();\n        }\n\n        // Make saveDraft available globally\n        window.saveDraft = saveDraft;\n\n        // Form submission handler\n        async function handleFormSubmission(draft = false) {\n            const form = document.getElementById("articleForm");\n            if (!form) return;\n\n            const isEditing = form.dataset.isEditing === "true";\n            const id = form.dataset.id;\n\n            const formData = new FormData(form);\n            const markdownEditor = document.getElementById("markdown-editor");\n\n            // Convert FormData to a plain object\n            const formObject = {};\n            for (const [key, value] of formData.entries()) {\n                formObject[key] = value;\n            }\n\n            // Add markdown content\n            if (markdownEditor) {\n                formObject.body = markdownEditor.value;\n            }\n\n            // Add draft status\n            formObject.draft = draft;\n\n            if (isEditing && id) {\n                formObject.id = parseInt(id);\n            }\n\n            try {\n                const response = await fetch("/api/create-blog", {\n                    method: isEditing ? "PUT" : "POST",\n                    headers: {\n                        "Content-Type": "application/json",\n                    },\n                    body: JSON.stringify(formObject),\n                });\n\n                const { data, error } = await response.json();\n\n                if (error) {\n                    alert("Failed to save article. Please try again.");\n                    return;\n                } else {\n                    window.location.href = \\`/admin/manage-article?id=\\${data[0].id}\\`;\n                }\n\n                alert(\n                    window.articleData.isEditing\n                        ? "Article updated!"\n                        : "Article created!"\n                );\n            } catch (err) {\n                console.error("Network error:", err); //eslint-disable-line no-console\n                alert("Failed to save article. Please try again.");\n            }\n        }\n\n        function saveDraft() {\n            handleFormSubmission(true); // Draft submission\n        }\n\n        // Set up form submission handler\n        function setupFormSubmission() {\n            const form = document.getElementById("articleForm");\n            if (form) {\n                form.addEventListener("submit", function (e) {\n                    e.preventDefault();\n                    handleFormSubmission(false); // Call submission only on form submit\n                });\n            }\n        }\n\n        // Keyboard shortcuts\n        function setupKeyboardShortcuts() {\n            const markdownEditor = document.getElementById("markdown-editor");\n            if (markdownEditor) {\n                markdownEditor.addEventListener("keydown", function (e) {\n                    // Ctrl/Cmd + S to save draft\n                    if ((e.ctrlKey || e.metaKey) && e.key === "s") {\n                        e.preventDefault();\n                        saveDraft();\n                    }\n\n                    // Tab key handling for indentation\n                    if (e.key === "Tab") {\n                        e.preventDefault();\n                        const start = this.selectionStart;\n                        const end = this.selectionEnd;\n\n                        // Insert 2 spaces for tab\n                        this.value =\n                            this.value.substring(0, start) +\n                            "  " +\n                            this.value.substring(end);\n                        this.selectionStart = this.selectionEnd = start + 2;\n                    }\n                });\n            }\n        }\n\n        // Initialize everything when DOM is ready\n        function initialize() {\n            try {\n                initializeTabs();\n                setupFormSubmission();\n                setupKeyboardShortcuts();\n            } catch (error) {\n                console.error("Error initializing article editor:", error); //eslint-disable-line no-console\n            }\n        }\n\n        // Initialize when everything is loaded\n        if (document.readyState === "loading") {\n            document.addEventListener("DOMContentLoaded", initialize);\n        } else {\n            initialize();\n        }\n    <\/script>  '])), maybeRenderHead(), isEditing ? "Edit Article" : "Create New Article", isEditing ? "Update your article content" : "Write and publish your blog post", renderTemplate`<li class="col-span-1 flex items-center justify-center" data-astro-cid-e4ag3yyx> <button id="theme-btn" class="focus-outline relative size-16 p-4 sm:size-8 hover:[&>svg]:stroke-accent" title="Toggles light & dark" aria-label="auto" aria-live="polite" data-astro-cid-e4ag3yyx> ${renderComponent($$result2, "IconMoon", IconMoon, { "class": "absolute top-[50%] left-[50%] -translate-[50%] scale-100 rotate-0 transition-all dark:scale-0 dark:-rotate-90", "data-astro-cid-e4ag3yyx": true })} ${renderComponent($$result2, "IconSunHigh", IconSunHigh, { "class": "absolute top-[50%] left-[50%] -translate-[50%] scale-0 rotate-90 transition-all dark:scale-100 dark:rotate-0", "data-astro-cid-e4ag3yyx": true })} </button> </li>`, isEditing && existingArticleError && renderTemplate`<div class="mx-auto mt-4 w-full max-w-7xl rounded p-4 text-center text-red-500" data-astro-cid-e4ag3yyx>
Error loading article: ${existingArticleError.message} </div>`, addAttribute(isEditing, "data-is-editing"), addAttribute(existingArticle?.id || "", "data-id"), addAttribute(existingArticle?.title || "", "value"), addAttribute(existingArticle?.author || "", "value"), existingArticle?.description || "", addAttribute(existingArticle?.tags?.join(", ") || "", "value"), existingArticle?.body || defaultBody, addAttribute(existingArticle?.featured ? true : void 0, "checked"), isEditing ? "Update Article" : "Create Article", renderScript($$result2, "/home/iam/Projects/On Going/My-Notes/src/pages/admin/manage/index.astro?astro&type=script&index=0&lang.ts"), renderScript($$result2, "/home/iam/Projects/On Going/My-Notes/src/pages/admin/manage/index.astro?astro&type=script&index=1&lang.ts"), defineScriptVars({
    articleContent: existingArticle?.body || defaultBody,
    isEditing
  })) })}`;
}, "/home/iam/Projects/On Going/My-Notes/src/pages/admin/manage/index.astro", void 0);

const $$file = "/home/iam/Projects/On Going/My-Notes/src/pages/admin/manage/index.astro";
const $$url = "/admin/manage";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
    __proto__: null,
    default: $$Index,
    file: $$file,
    prerender,
    url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
